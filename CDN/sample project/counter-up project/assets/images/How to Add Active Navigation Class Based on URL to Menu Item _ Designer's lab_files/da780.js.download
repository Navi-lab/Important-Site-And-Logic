var t=0;var frameInterval=25;var canvas=null;var context=null;var ballRadius=2;var collisionDamper=0.3;var floorFriction=0.0005*frameInterval;var mouseForceMultiplier=1*frameInterval;var restoreForce=0.002*frameInterval;var mouseX=99999;var mouseY=99999;var balls=null;function Ball(x,y,vx,vy,color){this.x=x;this.y=y;this.vx=vx;this.vy=vy;this.color=color;this.origX=x;this.origY=y;}
function init(){canvas=document.getElementById("myCanvas");context=canvas.getContext("2d");initStageObjects();setInterval(updateStage,frameInterval);}
function updateStage(){t+=frameInterval;clearCanvas();updateStageObjects();drawStageObjects();}
function initStageObjects(){balls=new Array();var red="#c30c30";var supergreen="#009b52";var green="#2bad58";var lightergreen="#4cbb5e";var green="#5fc35c";var yellowgreen="#8fd543";var lighteryellowgreen="#c7e65e";var yellow="#e0ec5d";var veryyellow="#fbe654";var lightorange="#fbdd5d";var orange="#fbc65f";var darkgreenyellow="#8c8822";var superdarkgreenyellow="#62751f";var royalred="#95261b";var redish="#f8734b";var lightred="#ef576b";var lightrosy="#f8bcc4";var rosy="#fadeea";var violet="#d7cfdc";var darkviolet="#b8cae2";var blueviolet="#63a9d5";var lightblue="#64c1e5";var blue="#70ceec";var bluewhite="#ceeff8";var white="#fff";balls.push(new Ball(60,134,0,0,white));balls.push(new Ball(70,128,0,0,white));balls.push(new Ball(80,122,0,0,bluewhite));balls.push(new Ball(90,112,0,0,bluewhite));balls.push(new Ball(100,98,0,0,blue));balls.push(new Ball(110,88,0,0,blue));balls.push(new Ball(120,82,0,0,blue));balls.push(new Ball(130,78,0,0,blue));balls.push(new Ball(140,76,0,0,lightblue));balls.push(new Ball(150,76,0,0,lightblue));balls.push(new Ball(160,78,0,0,blueviolet));balls.push(new Ball(170,82,0,0,lightblue));balls.push(new Ball(180,86,0,0,blueviolet));balls.push(new Ball(190,89,0,0,blueviolet));balls.push(new Ball(200,94,0,0,blueviolet));balls.push(new Ball(210,102,0,0,darkviolet));balls.push(new Ball(220,108,0,0,darkviolet));balls.push(new Ball(230,114,0,0,darkviolet));balls.push(new Ball(240,120,0,0,darkviolet));balls.push(new Ball(250,126,0,0,darkviolet));balls.push(new Ball(260,134,0,0,darkviolet));balls.push(new Ball(270,142,0,0,violet));balls.push(new Ball(282,152,0,0,violet));balls.push(new Ball(290,161,0,0,violet));balls.push(new Ball(300,170,0,0,violet));balls.push(new Ball(310,178,0,0,violet));balls.push(new Ball(320,184,0,0,violet));balls.push(new Ball(330,190,0,0,violet));balls.push(new Ball(340,195,0,0,violet));balls.push(new Ball(514,114,0,0,rosy));balls.push(new Ball(516,103,0,0,rosy));balls.push(new Ball(520,94,0,0,rosy));balls.push(new Ball(530,79,0,0,rosy));balls.push(new Ball(540,68,0,0,rosy));balls.push(new Ball(550,62,0,0,rosy));balls.push(new Ball(560,55,0,0,rosy));balls.push(new Ball(570,50,0,0,lightrosy));balls.push(new Ball(580,46,0,0,lightrosy));balls.push(new Ball(590,43,0,0,lightrosy));balls.push(new Ball(604,41,0,0,royalred));balls.push(new Ball(516,134,0,0,rosy));balls.push(new Ball(520,144,0,0,rosy));balls.push(new Ball(531,150,0,0,red));balls.push(new Ball(540,152,0,0,red));balls.push(new Ball(550,153,0,0,red));balls.push(new Ball(560,147,0,0,lightred));balls.push(new Ball(571,143,0,0,lightred));balls.push(new Ball(580,135,0,0,lightred));balls.push(new Ball(590,129,0,0,lightred));balls.push(new Ball(600,124,0,0,lightred));balls.push(new Ball(610,117,0,0,lightred));balls.push(new Ball(620,113,0,0,red));balls.push(new Ball(632,181,0,0,redish));balls.push(new Ball(640,181,0,0,redish));balls.push(new Ball(650,180,0,0,redish));balls.push(new Ball(674,175,0,0,orange));balls.push(new Ball(680,173,0,0,orange));balls.push(new Ball(690,173,0,0,lightorange));balls.push(new Ball(700,172,0,0,lightorange));balls.push(new Ball(710,173,0,0,veryyellow));balls.push(new Ball(720,174,0,0,veryyellow));balls.push(new Ball(680,109,0,0,orange));balls.push(new Ball(700,113,0,0,lightorange));balls.push(new Ball(710,113,0,0,lightorange));balls.push(new Ball(720,118,0,0,lightorange));balls.push(new Ball(730,178,0,0,yellow));balls.push(new Ball(742,185,0,0,darkgreenyellow));balls.push(new Ball(746,184,0,0,darkgreenyellow));balls.push(new Ball(760,188,0,0,darkgreenyellow));balls.push(new Ball(770,193,0,0,superdarkgreenyellow));balls.push(new Ball(730,122,0,0,yellow));balls.push(new Ball(740,124,0,0,yellow));balls.push(new Ball(750,126,0,0,yellow));balls.push(new Ball(760,130,0,0,lighteryellowgreen));balls.push(new Ball(770,131,0,0,lighteryellowgreen));balls.push(new Ball(780,132,0,0,yellowgreen));balls.push(new Ball(790,133,0,0,yellowgreen));balls.push(new Ball(800,134,0,0,green));balls.push(new Ball(810,134,0,0,green));balls.push(new Ball(820,134,0,0,lightergreen));balls.push(new Ball(830,133,0,0,green));balls.push(new Ball(840,133,0,0,supergreen));balls.push(new Ball(850,134,0,0,supergreen));balls.push(new Ball(860,135,0,0,supergreen));balls.push(new Ball(870,138,0,0,supergreen));balls.push(new Ball(880,144,0,0,supergreen));balls.push(new Ball(890,153,0,0,supergreen));balls.push(new Ball(900,164,0,0,supergreen));balls.push(new Ball(910,174,0,0,supergreen));balls.push(new Ball(920,184,0,0,supergreen));balls.push(new Ball(930,194,0,0,supergreen));}
function drawStageObjects(){for(var n=0;n<balls.length;n++){context.beginPath();context.arc(balls[n].x,balls[n].y,ballRadius,0,2*Math.PI,false);context.fillStyle=balls[n].color;context.fill();}}
function updateStageObjects(){for(var n=0;n<balls.length;n++){balls[n].y+=balls[n].vy;balls[n].x+=balls[n].vx;if(balls[n].x>balls[n].origX){balls[n].vx-=restoreForce;}
else{balls[n].vx+=restoreForce;}
if(balls[n].y>balls[n].origY){balls[n].vy-=restoreForce;}
else{balls[n].vy+=restoreForce;}
var distX=balls[n].x-mouseX;var distY=balls[n].y-mouseY;var radius=Math.sqrt(Math.pow(distX,2)+
Math.pow(distY,2));var totalDist=Math.abs(distX)+Math.abs(distY);var forceX=(Math.abs(distX)/totalDist)*(1/radius)*mouseForceMultiplier;var forceY=(Math.abs(distY)/totalDist)*(1/radius)*mouseForceMultiplier;if(distX>0){balls[n].vx+=forceX;}
else{balls[n].vx-=forceX;}
if(distY>0){balls[n].vy+=forceY;}
else{balls[n].vy-=forceY;}
if(balls[n].vx>0){balls[n].vx-=floorFriction;}
else if(balls[n].vx<0){balls[n].vx+=floorFriction;}
if(balls[n].vy>0){balls[n].vy-=floorFriction;}
else if(balls[n].vy<0){balls[n].vy+=floorFriction;}
if(balls[n].y>(canvas.height-ballRadius)){balls[n].y=canvas.height-ballRadius-2;balls[n].vy*=-1;balls[n].vy*=(1-collisionDamper);}
if(balls[n].y<(ballRadius)){balls[n].y=ballRadius+2;balls[n].vy*=-1;balls[n].vy*=(1-collisionDamper);}
if(balls[n].x>(canvas.width-ballRadius)){balls[n].x=canvas.width-ballRadius-2;balls[n].vx*=-1;balls[n].vx*=(1-collisionDamper);}
if(balls[n].x<(ballRadius)){balls[n].x=ballRadius+2;balls[n].vx*=-1;balls[n].vx*=(1-collisionDamper);}}}
function clearCanvas(){context.clearRect(0,0,canvas.width,canvas.height);}
function handleMouseMove(evt){mouseX=evt.clientX-canvas.offsetLeft;mouseY=evt.clientY-canvas.offsetTop;}
function handleMouseOut(){mouseX=99999;mouseY=99999;}